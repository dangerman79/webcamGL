<!DOCTYPE html>
<html>
<head>
<link rel="stylesheet" href="accordion.css">
<link rel="stylesheet" href="GLFX.css">
<link rel="icon" href="favicon.ico" type="image/png" sizes="32x32">


<script src="generalFunctions.js"></script>
<script src="dataObjs.js"></script>
<script src="accordion.js"></script>
<script src="fileIO.js"></script>
<script src="widgets.js"></script>
<script src="cameraWidget.js"></script>
<script src="chromaMaskWidget.js"></script>
<script src="backgroundMaskWidget.js"></script>
<script src="videoOutWidget.js"></script>
<script src="staccatoFilterWidget.js"></script>
<script src="staccatoTrailsWidget.js"></script>
<script src="differenceMaskWidget.js"></script>
<script src="videoPlayerWidget.js"></script>
<script src="colourFlattenWidget.js"></script>
<script src="mixerWidget.js"></script>
<script src="colourMapWidget.js"></script>
</head>
<body>
	<div class="container">
		<header>
			<h2>GLFX</h2>
			<p>Video FX, in your Browser</p>
		</header>
		<div id="controls">
			Project name: <input type="text" id="projName" value="New Project"><br>
			<ul>
				<button id="saveSettings" type="button" onclick="saveSettingsClick();">Save Settings</button>
				<input id="fileInput" type="file" name="files[]" style="display:none;"/>
			  	<button id="loadSettings" type="button" onclick="loadSettingsClick();">Load Settings</button>
			</ul>
			<div id="widget_creators">
			  <div class="widget_group">
				<h4>Inputs</h4>
				<div><button id="addWebcam" type="button" >Camera</button></div>
			    <div><button id="addVideoFile" type="button" >Video Player</button></div>
			  </div>
			  
			  <div class="widget_group">
			  	<h4>Mixers</h4>
				<div><button id="addMultiInput" type="button" >Widget Mixer</button></div></div>
			  
			  <div class="widget_group">
				<h4>Masks</h4>
				<div><button id="addChromaFilter" type = 'button'>Chroma Mask</button></div>
				<div><button id="addBkMask" type = 'button'>Backround Mask</button></div>
				<div><button id="addDiffMask" type = 'button'>Difference Mask</button></div>
			  </div>
			  
			  <div class="widget_group">
				<h4>Filters</h4>
				<div><button id="addStaccatoFilter" type = 'button'>Staccato Filter</button></div>
				<div><button id="addStaccatoTrails" type = 'button'>Staccato Trails</button></div>
				<div><button id="addColourFlatten" type = 'button'>Colour Flatten</button></div>
				<div><button id="addColourMap" type = 'button'>Colour Changer</button></div>
			  </div>
			  
			  <div class="widget_group">
				<h4>Outputs</h4>
				<div><button id="addVideoOutput" type = 'button'>Video Output</button></div>
			  </div>
			  
			</div>	
		</div>
		<div id="main">
			<!--this is where all the generated HTML goes -->
		</div>
	</div>
</body>


<script>
	navigator.getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia || navigator.msGetUserMedia || navigator.oGetUserMedia;
	
	
	mainDomElement = document.querySelector("#main");
	document.querySelector("#addWebcam").onclick = function(){createWidget('webcam');}
	document.querySelector("#addChromaFilter").onclick = function(){createWidget('chromaMask');}
	document.querySelector("#addStaccatoFilter").onclick = function(){createWidget('staccatoFilter');}
	document.querySelector("#addStaccatoTrails").onclick = function(){createWidget('staccatoTrails');}
	document.querySelector("#addVideoOutput").onclick = function(){createWidget('videoOutput');}
	document.querySelector("#addBkMask").onclick = function(){createWidget('backroundMask');}
	document.querySelector("#addDiffMask").onclick = function(){createWidget('diffMask');}
	document.querySelector("#addVideoFile").onclick = function(){createWidget('videoPlayer');}
	document.querySelector("#addColourFlatten").onclick = function(){createWidget('colourFlatten');}
	document.querySelector("#addMultiInput").onclick = function(){createWidget('mixer');}
	document.querySelector("#addColourMap").onclick = function(){createWidget('colourMap');}
	
	
	function saveSettingsClick ()
	{
		var projName = document.querySelector("#projName").value
		projectName = projName;
		saveSettingsToFile(projName);

	}
	
	function loadSettingsClick()
	{
		
		fileInputDlg = document.getElementById('fileInput');
		fileInputDlg.click();
	}
	document.getElementById('fileInput').addEventListener('change', loadSettingsFile, false);
	

</script>


</html>
